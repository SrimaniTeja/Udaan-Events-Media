(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48459,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),n=e.i(33209),o=e.i(76525);let a=["image/jpeg","image/png","image/heic","video/mp4","video/quicktime"],s=["image/jpeg","image/png","video/mp4"];function l({eventId:e,fileType:l,label:d}){let u=(0,i.useRouter)(),c=r.useRef(null),[p,f]=r.useState(!1),[m,g]=r.useState(!1),[h,v]=r.useState(null),x=r.useMemo(()=>"RAW"===l?a:s,[l]),y=r.useMemo(()=>x.join(","),[x]);async function b(t){if(0===t.length)return;let r=function(e){if(0===e.length)return"No files selected";let t=[];for(let r of e){if(!x.includes(r.type)){t.push(`${r.name}: Invalid file type. Allowed: ${x.join(", ")}`);continue}let e=r.type.startsWith("image/"),i=r.type.startsWith("video/"),n=e?0x3200000:i?0x280000000:0x3200000;if(r.size>n){let i=Math.round(n/1048576),o=Math.round(r.size/1048576);t.push(`${r.name}: File size (${o} MB) exceeds maximum (${i} MB) for ${e?"images":"videos"}`)}}return t.length>0?t.join("\n"):null}(t);if(r)return void v(r);f(!0),v(null);let i=new FormData;for(let e of t)i.append("files",e);let n=await fetch(`/api/upload?eventId=${encodeURIComponent(e)}&fileType=${l}`,{method:"POST",body:i});if(!n.ok){let e=await n.json().catch(()=>null);v(e?.error??"Upload failed"),f(!1);return}f(!1),u.refresh()}return(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("div",{className:(0,n.cn)("rounded-2xl border border-dashed border-border bg-surface/40 p-6 transition",m?"border-primary/60 bg-primary/10":"hover:bg-surface/60"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),g(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),g(!1),b(Array.from(e.dataTransfer.files))},children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:d}),(0,t.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Drag & drop files here, or choose from your device. (Drive upload streaming will be added next.)"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(o.Button,{type:"button",variant:"secondary",onClick:function(){c.current?.click()},disabled:p,children:"Choose files"})})]}),(0,t.jsx)("input",{ref:c,className:"hidden",type:"file",multiple:!0,accept:y,onChange:e=>{b(Array.from(e.target.files??[])),c.current&&(c.current.value="")}})]}),h?(0,t.jsx)("div",{className:"rounded-xl border border-warning/30 bg-warning/10 px-3 py-2 text-sm text-warning",children:h}):null,p?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Uploading…"}):null]})}e.s(["FileDropzone",()=>l],48459)},60803,e=>{"use strict";var t=e.i(43476),r=e.i(71645),i=e.i(18566),n=e.i(76525);function o({eventId:e,nextStatus:o,children:a,variant:s="primary"}){let l=(0,i.useRouter)(),[d,u]=r.useState(!1);async function c(){u(!0),await fetch(`/api/events/${encodeURIComponent(e)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({nextStatus:o})}),u(!1),l.refresh()}return(0,t.jsx)(n.Button,{onClick:c,disabled:d,variant:s,children:d?"Working…":a})}e.s(["EventStatusActionButton",()=>o])}]);