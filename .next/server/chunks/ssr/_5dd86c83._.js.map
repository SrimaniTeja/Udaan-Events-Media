{"version":3,"sources":["../../../../lib/auth/requireRole.ts","../../../../components/layout/PortalShellClient.tsx/__nextjs-internal-proxy.mjs","../../../../lib/nav.ts","../../../../components/layout/PortalShell.tsx","../../../../app/admin/layout.tsx"],"sourcesContent":["import \"server-only\";\r\n\r\nimport { redirect } from \"next/navigation\";\r\nimport type { SessionUser, UserRole } from \"@/lib/types\";\r\nimport { getSessionUser } from \"@/lib/auth/session\";\r\n\r\nexport async function requireUser(): Promise<SessionUser> {\r\n  const user = await getSessionUser();\r\n  if (!user) redirect(\"/login\");\r\n  return user;\r\n}\r\n\r\nexport async function requireRole(role: UserRole): Promise<SessionUser> {\r\n  const user = await requireUser();\r\n  if (user.role !== role) redirect(\"/unauthorized\");\r\n  return user;\r\n}\r\n\r\n\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PortalShellClient = registerClientReference(\n    function() { throw new Error(\"Attempted to call PortalShellClient() from the server but PortalShellClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/layout/PortalShellClient.tsx\",\n    \"PortalShellClient\",\n);\n","import type { UserRole } from \"@/lib/types\";\r\n\r\nexport type NavItem = {\r\n  label: string;\r\n  href: string;\r\n};\r\n\r\nexport function getNavItems(role: UserRole): NavItem[] {\r\n  if (role === \"ADMIN\") {\r\n    return [\r\n      { label: \"Dashboard\", href: \"/admin/dashboard\" },\r\n      { label: \"Events\", href: \"/admin/events\" },\r\n      { label: \"Notifications\", href: \"/admin/notifications\" },\r\n      { label: \"Profile\", href: \"/admin/profile\" },\r\n    ];\r\n  }\r\n\r\n  if (role === \"CAMERAMAN\") {\r\n    return [\r\n      { label: \"Dashboard\", href: \"/cameraman/dashboard\" },\r\n      { label: \"My Events\", href: \"/cameraman/events\" },\r\n      { label: \"Notifications\", href: \"/cameraman/notifications\" },\r\n      { label: \"Profile\", href: \"/cameraman/profile\" },\r\n    ];\r\n  }\r\n\r\n  return [\r\n    { label: \"Dashboard\", href: \"/editor/dashboard\" },\r\n    { label: \"Available Tasks\", href: \"/editor/events\" },\r\n    { label: \"Notifications\", href: \"/editor/notifications\" },\r\n    { label: \"Profile\", href: \"/editor/profile\" },\r\n  ];\r\n}\r\n\r\n\r\n","import type { ReactNode } from \"react\";\r\nimport type { NavItem } from \"@/lib/nav\";\r\nimport { getNavItems } from \"@/lib/nav\";\r\nimport type { SessionUser, UserRole } from \"@/lib/types\";\r\nimport { PortalShellClient } from \"@/components/layout/PortalShellClient\";\r\n\r\nexport function PortalShell({\r\n  user,\r\n  role,\r\n  children,\r\n}: {\r\n  user: SessionUser;\r\n  role: UserRole;\r\n  children: ReactNode;\r\n}) {\r\n  const navItems: NavItem[] = getNavItems(role);\r\n  return (\r\n    <PortalShellClient user={user} role={role} navItems={navItems}>\r\n      {children}\r\n    </PortalShellClient>\r\n  );\r\n}\r\n\r\n\r\n","import type { ReactNode } from \"react\";\r\nimport { requireRole } from \"@/lib/auth/requireRole\";\r\nimport { PortalShell } from \"@/components/layout/PortalShell\";\r\n\r\nexport default async function AdminLayout({ children }: { children: ReactNode }) {\r\n  const user = await requireRole(\"ADMIN\");\r\n  return (\r\n    <PortalShell user={user} role=\"ADMIN\">\r\n      {children}\r\n    </PortalShell>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"uCAAA,EAAA,CAAA,CAAA,OAEA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,IACpB,IAAM,EAAO,MAAM,CAAA,EAAA,EAAA,cAAA,AAAc,IAEjC,OADI,AAAC,GAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,UACb,CACT,CAEO,eAAe,EAAY,CAAc,EAC9C,IAAM,EAAO,MAAM,IAEnB,OADI,EAAK,IAAI,GAAK,GAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,iBAC1B,CACT,oDCdO,IAAM,EAAoB,CAAA,EADjC,AACiC,EADjC,CAAA,CAAA,OACiC,uBAAA,AAAuB,EACpD,WAAa,MAAM,AAAI,MAAM,gPAAkP,EAC/Q,wEACA,4EAHG,IAAM,EAAoB,CAAA,EADjC,AACiC,EADjC,CAAA,CAAA,OACiC,uBAAA,AAAuB,EACpD,WAAa,MAAM,AAAI,MAAM,gPAAkP,EAC/Q,oDACA,uJEDJ,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,EAAY,MAC1B,CAAI,CACJ,MAAI,UACJ,CAAQ,CAKT,EACC,IAAM,EDPN,AAAI,AAAS,SAAS,ACOM,CAAY,EDN/B,CACL,CAAE,MAAO,YAAa,KAAM,kBAAmB,EAC/C,CAAE,MAAO,SAAU,KAAM,eAAgB,EACzC,CAAE,MAAO,gBAAiB,KAAM,sBAAuB,EACvD,CAAE,MAAO,UAAW,KAAM,gBAAiB,EAC5C,CAGC,AAAS,aAAa,GACjB,CACL,CAAE,MAAO,YAAa,KAAM,sBAAuB,EACnD,CAAE,MAAO,YAAa,KAAM,mBAAoB,EAChD,CAAE,MAAO,gBAAiB,KAAM,0BAA2B,EAC3D,CAAE,MAAO,UAAW,KAAM,oBAAqB,EAChD,CAGI,CACL,CAAE,MAAO,YAAa,KAAM,mBAAoB,EAChD,CAAE,MAAO,kBAAmB,KAAM,gBAAiB,EACnD,CAAE,MAAO,gBAAiB,KAAM,uBAAwB,EACxD,CAAE,MAAO,UAAW,KAAM,iBAAkB,EAC7C,CCfD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAAC,KAAM,EAAM,KAAM,EAAM,SAAU,WAClD,GAGP,0ECpBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,eAAe,EAAY,UAAE,CAAQ,CAA2B,EAC7E,IAAM,EAAO,MAAM,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,SAC/B,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,KAAM,EAAM,KAAK,iBAC3B,GAGP","ignoreList":[1]}