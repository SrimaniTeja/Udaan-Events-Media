module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},29173,(a,b,c)=>{b.exports=a.x("@prisma/client",()=>require("@prisma/client"))},56123,a=>{"use strict";function b(a,b){return({CREATED:["RAW_UPLOADED"],RAW_UPLOADED:["ASSIGNED"],ASSIGNED:["EDITING"],EDITING:["FINAL_UPLOADED"],FINAL_UPLOADED:["COMPLETED"],COMPLETED:[]})[a].includes(b)}a.s(["EVENT_STATUSES",0,["CREATED","RAW_UPLOADED","ASSIGNED","EDITING","FINAL_UPLOADED","COMPLETED"],"canTransition",()=>b])},1241,a=>{"use strict";a.i(55781);var b=a.i(29173);let c=globalThis.prisma??new b.PrismaClient({log:["error"]});a.s(["prisma",0,c])},2505,a=>{"use strict";a.i(55781);var b=a.i(1241);function c(a){return{id:a.id,name:a.name,email:a.email,role:a.role,isFree:"EDITOR"===a.role?a.isFree:void 0}}function d(a){return{id:a.id,name:a.name,date:a.date.toISOString(),cameramanId:a.cameramanId??null,editorId:a.editorId??null,status:a.status,driveFolderId_root:a.driveRootId??null,driveFolderId_raw:a.driveRawId??null,driveFolderId_edited:a.driveEditedId??null,driveFolderId_final:a.driveFinalId??null}}function e(a){return{id:a.id,eventId:a.eventId,uploadedBy:a.uploaderId,fileType:a.fileType,driveFileId:a.driveFileId??"",size:a.size,timestamp:a.createdAt.toISOString(),name:a.name}}async function f(a){return(await b.prisma.user.findMany({where:a?{role:a}:void 0,orderBy:{createdAt:"asc"}})).map(c)}async function g(a){let c="ADMIN"===a.role?{}:"CAMERAMAN"===a.role?{cameramanId:a.id}:{editorId:a.id};return(await b.prisma.event.findMany({where:c,orderBy:{date:"desc"}})).map(d)}async function h(a){let c=await b.prisma.event.findUnique({where:{id:a}});return c?d(c):null}async function i(a,c){return(await b.prisma.file.findMany({where:{eventId:a,...c?{fileType:c}:{}},orderBy:{createdAt:"desc"}})).map(e)}a.i(56123),a.s(["getEventById",()=>h,"listEventsForUser",()=>g,"listFilesForEvent",()=>i,"listUsers",()=>f],2505)},66142,40432,a=>{"use strict";var b=a.i(7997),c=a.i(91887);let d={default:"bg-surface-2 text-foreground border-border",success:"bg-success/15 text-success border-success/30",warning:"bg-warning/15 text-warning border-warning/30"};function e({className:a,variant:e="default",...f}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-1 text-xs font-medium",d[e],a),...f})}function f({status:a}){return(0,b.jsx)(e,{variant:"COMPLETED"===a||"FINAL_UPLOADED"===a?"success":"RAW_UPLOADED"===a?"warning":"default",children:a})}function g(a){let b=new Date(a);return Number.isNaN(b.getTime())?a:b.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function h(a){let b=["B","KB","MB","GB","TB"],c=a,d=0;for(;c>=1024&&d<b.length-1;)c/=1024,d++;return`${c.toFixed(+(0!==d))} ${b[d]}`}a.s(["StatusBadge",()=>f],66142),a.s(["formatBytes",()=>h,"formatDate",()=>g],40432)},67971,a=>{a.n(a.i(26435))},25801,a=>{"use strict";var b=a.i(7997),c=a.i(56123),d=a.i(91887);function e({current:a}){let e=c.EVENT_STATUSES.indexOf(a);return(0,b.jsx)("div",{className:"grid gap-3",children:c.EVENT_STATUSES.map((a,f)=>{let g=f===e;return(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:(0,d.cn)("mt-0.5 h-4 w-4 rounded-full border",f<e?"border-success/40 bg-success/20":g?"border-primary/50 bg-primary/20":"border-border bg-surface-2")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:(0,d.cn)("text-sm",g?"text-foreground font-medium":"text-muted-foreground"),children:a}),f<c.EVENT_STATUSES.length-1?(0,b.jsx)("div",{className:"mt-2 h-5 w-px bg-border/60"}):null]})]},a)})})}a.s(["EventTimeline",()=>e])},57491,a=>{"use strict";var b=a.i(7997);a.i(70396);var c=a.i(73727),d=a.i(91511),e=a.i(66142),f=a.i(25801),g=a.i(61959),h=a.i(2505),i=a.i(40432);async function j({params:a}){await (0,g.requireRole)("ADMIN");let{id:j}=await a,k=await (0,h.getEventById)(j);k||(0,c.notFound)();let l=await (0,h.listFilesForEvent)(k.id),m=await (0,h.listUsers)(),n=m.find(a=>a.id===k.cameramanId)??null,o=m.find(a=>a.id===k.editorId)??null;return(0,b.jsxs)("div",{className:"grid gap-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-lg font-semibold",children:k.name}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:[(0,i.formatDate)(k.date)," â€¢ ",(0,b.jsx)("span",{className:"inline-flex",children:(0,b.jsx)(e.StatusBadge,{status:k.status})})]})]})}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,b.jsxs)(d.Card,{className:"lg:col-span-2",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Files"})}),(0,b.jsx)(d.CardContent,{children:0===l.length?(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No files yet."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"text-xs text-muted-foreground",children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"py-2 text-left font-medium",children:"Name"}),(0,b.jsx)("th",{className:"py-2 text-left font-medium",children:"Type"}),(0,b.jsx)("th",{className:"py-2 text-left font-medium",children:"Size"}),(0,b.jsx)("th",{className:"py-2 text-left font-medium",children:"Uploaded"})]})}),(0,b.jsx)("tbody",{children:l.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border/60 last:border-b-0",children:[(0,b.jsx)("td",{className:"py-3",children:a.name}),(0,b.jsx)("td",{className:"py-3 text-muted-foreground",children:a.fileType}),(0,b.jsx)("td",{className:"py-3 text-muted-foreground",children:(0,i.formatBytes)(a.size)}),(0,b.jsx)("td",{className:"py-3 text-muted-foreground",children:(0,i.formatDate)(a.timestamp)})]},a.id))})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Timeline"})}),(0,b.jsx)(d.CardContent,{children:(0,b.jsx)(f.EventTimeline,{current:k.status})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"Assignments"})}),(0,b.jsxs)(d.CardContent,{className:"grid gap-3 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Cameraman"}),(0,b.jsx)("div",{className:"mt-1",children:n?n.name:"Unassigned"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Editor"}),(0,b.jsx)("div",{className:"mt-1",children:o?o.name:"Unassigned"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Drive folders"}),(0,b.jsx)("div",{className:"mt-1 text-muted-foreground",children:"Not created yet (Drive integration comes next)."})]})]})]})]})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__462b0ace._.js.map