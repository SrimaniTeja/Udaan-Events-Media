module.exports=[52616,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(69767),f=a.i(12466);let g=["image/jpeg","image/png","image/heic","video/mp4","video/quicktime"],h=["image/jpeg","image/png","video/mp4"];function i({eventId:a,fileType:i,label:j}){let k=(0,d.useRouter)(),l=c.useRef(null),[m,n]=c.useState(!1),[o,p]=c.useState(!1),[q,r]=c.useState(null),s=c.useMemo(()=>"RAW"===i?g:h,[i]),t=c.useMemo(()=>s.join(","),[s]);async function u(b){if(0===b.length)return;let c=function(a){if(0===a.length)return"No files selected";let b=[];for(let c of a){if(!s.includes(c.type)){b.push(`${c.name}: Invalid file type. Allowed: ${s.join(", ")}`);continue}let a=c.type.startsWith("image/"),d=c.type.startsWith("video/"),e=a?0x3200000:d?0x280000000:0x3200000;if(c.size>e){let d=Math.round(e/1048576),f=Math.round(c.size/1048576);b.push(`${c.name}: File size (${f} MB) exceeds maximum (${d} MB) for ${a?"images":"videos"}`)}}return b.length>0?b.join("\n"):null}(b);if(c)return void r(c);n(!0),r(null);let d=new FormData;for(let a of b)d.append("files",a);let e=await fetch(`/api/upload?eventId=${encodeURIComponent(a)}&fileType=${i}`,{method:"POST",body:d});if(!e.ok){let a=await e.json().catch(()=>null);r(a?.error??"Upload failed"),n(!1);return}n(!1),k.refresh()}return(0,b.jsxs)("div",{className:"grid gap-3",children:[(0,b.jsxs)("div",{className:(0,e.cn)("rounded-2xl border border-dashed border-border bg-surface/40 p-6 transition",o?"border-primary/60 bg-primary/10":"hover:bg-surface/60"),onDragEnter:a=>{a.preventDefault(),a.stopPropagation(),p(!0)},onDragOver:a=>{a.preventDefault(),a.stopPropagation(),p(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),p(!1)},onDrop:a=>{a.preventDefault(),a.stopPropagation(),p(!1),u(Array.from(a.dataTransfer.files))},children:[(0,b.jsxs)("div",{className:"flex flex-col items-start gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:j}),(0,b.jsx)("div",{className:"mt-1 text-xs text-muted-foreground",children:"Drag & drop files here, or choose from your device. (Drive upload streaming will be added next.)"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)(f.Button,{type:"button",variant:"secondary",onClick:function(){l.current?.click()},disabled:m,children:"Choose files"})})]}),(0,b.jsx)("input",{ref:l,className:"hidden",type:"file",multiple:!0,accept:t,onChange:a=>{u(Array.from(a.target.files??[])),l.current&&(l.current.value="")}})]}),q?(0,b.jsx)("div",{className:"rounded-xl border border-warning/30 bg-warning/10 px-3 py-2 text-sm text-warning",children:q}):null,m?(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:"Uploading…"}):null]})}a.s(["FileDropzone",()=>i],52616)},62850,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(12466);function f({eventId:a,nextStatus:f,children:g,variant:h="primary"}){let i=(0,d.useRouter)(),[j,k]=c.useState(!1);async function l(){k(!0),await fetch(`/api/events/${encodeURIComponent(a)}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({nextStatus:f})}),k(!1),i.refresh()}return(0,b.jsx)(e.Button,{onClick:l,disabled:j,variant:h,children:j?"Working…":g})}a.s(["EventStatusActionButton",()=>f])}];

//# sourceMappingURL=components_2ef94c61._.js.map