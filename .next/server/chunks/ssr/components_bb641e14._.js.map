{"version":3,"sources":["../../../../components/ui/Card.tsx","../../../../components/notifications/NotificationsList.tsx"],"sourcesContent":["import * as React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function Card({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"rounded-2xl border border-border bg-surface/70 shadow-sm backdrop-blur supports-[backdrop-filter]:bg-surface/60\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport function CardHeader({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return <div className={cn(\"p-5\", className)} {...props} />;\r\n}\r\n\r\nexport function CardTitle({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLHeadingElement>) {\r\n  return (\r\n    <h3 className={cn(\"text-sm font-semibold text-foreground\", className)} {...props} />\r\n  );\r\n}\r\n\r\nexport function CardDescription({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLParagraphElement>) {\r\n  return (\r\n    <p\r\n      className={cn(\"mt-1 text-sm text-muted-foreground\", className)}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n\r\nexport function CardContent({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return <div className={cn(\"px-5 pb-5\", className)} {...props} />;\r\n}\r\n\r\n\r\n","\"use client\";\r\n\r\nimport * as React from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport type { Notification } from \"@/lib/notifications\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\r\nimport { Button } from \"@/components/ui/Button\";\r\n\r\nexport function NotificationsList() {\r\n  const router = useRouter();\r\n  const [items, setItems] = React.useState<Notification[]>([]);\r\n  const [loading, setLoading] = React.useState(true);\r\n\r\n  async function load() {\r\n    setLoading(true);\r\n    const res = await fetch(\"/api/notifications\");\r\n    const data = (await res.json().catch(() => null)) as any;\r\n    setItems((data?.notifications ?? []) as Notification[]);\r\n    setLoading(false);\r\n  }\r\n\r\n  async function markRead(id: string) {\r\n    await fetch(\"/api/notifications\", {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ id }),\r\n    });\r\n    await load();\r\n    router.refresh();\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    void load();\r\n  }, []);\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Notifications</CardTitle>\r\n      </CardHeader>\r\n      <CardContent className=\"grid gap-3\">\r\n        {loading ? (\r\n          <div className=\"text-sm text-muted-foreground\">Loadingâ€¦</div>\r\n        ) : items.length === 0 ? (\r\n          <div className=\"text-sm text-muted-foreground\">No notifications yet.</div>\r\n        ) : (\r\n          items.map((n) => (\r\n            <div\r\n              key={n.id}\r\n              className=\"flex flex-col gap-2 rounded-2xl border border-border bg-surface/40 p-4 sm:flex-row sm:items-center sm:justify-between\"\r\n            >\r\n              <div className=\"min-w-0\">\r\n                <div className=\"text-sm font-medium\">\r\n                  {n.title}{\" \"}\r\n                  {n.isRead ? (\r\n                    <span className=\"ml-2 text-xs text-muted-foreground\">(read)</span>\r\n                  ) : (\r\n                    <span className=\"ml-2 text-xs text-primary\">(new)</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"mt-1 text-sm text-muted-foreground\">{n.message}</div>\r\n                {n.eventId ? (\r\n                  <div className=\"mt-2 text-xs text-muted-foreground\">\r\n                    Event:{\" \"}\r\n                    <Link href=\"#\" className=\"text-primary hover:underline\">\r\n                      {n.eventId}\r\n                    </Link>\r\n                  </div>\r\n                ) : null}\r\n              </div>\r\n              {!n.isRead ? (\r\n                <Button variant=\"secondary\" onClick={() => void markRead(n.id)}>\r\n                  Mark read\r\n                </Button>\r\n              ) : null}\r\n            </div>\r\n          ))\r\n        )}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"wDACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,EAAK,WACnB,CAAS,CACT,GAAG,EACkC,EACrC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,kHACA,GAED,GAAG,CAAK,EAGf,CAEO,SAAS,EAAW,WACzB,CAAS,CACT,GAAG,EACkC,EACrC,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,MAAO,GAAa,GAAG,CAAK,EACxD,CAEO,SAAS,EAAU,CACxB,WAAS,CACT,GAAG,EACsC,EACzC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,wCAAyC,GAAa,GAAG,CAAK,EAEpF,CAEO,SAAS,EAAgB,WAC9B,CAAS,CACT,GAAG,EACwC,EAC3C,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,qCAAsC,GACnD,GAAG,CAAK,EAGf,CAEO,SAAS,EAAY,WAC1B,CAAS,CACT,GAAG,EACkC,EACrC,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,YAAa,GAAa,GAAG,CAAK,EAC9D,+ICjDA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,IACd,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAO,EAAS,CAAG,EAAA,QAAc,CAAiB,EAAE,EACrD,CAAC,EAAS,EAAW,CAAG,EAAA,QAAc,EAAC,GAE7C,eAAe,IACb,GAAW,GACX,IAAM,EAAM,MAAM,MAAM,sBAClB,EAAQ,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,MAC3C,EAAU,GAAM,eAAiB,EAAE,EACnC,GAAW,EACb,CAEA,eAAe,EAAS,CAAU,EAChC,MAAM,MAAM,qBAAsB,CAChC,OAAQ,QACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,SAAS,CAAC,IAAE,CAAG,EAC5B,GACA,MAAM,IACN,EAAO,OAAO,EAChB,CAMA,OAJA,EAAA,SAAe,CAAC,KACT,GACP,EAAG,EAAE,EAGH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,UACT,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,oBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,sBACpB,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAgC,aAC5B,IAAjB,EAAM,MAAM,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAgC,0BAE/C,EAAM,GAAG,CAAC,AAAC,GACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAU,kIAEV,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAE,KAAK,CAAE,IACT,EAAE,MAAM,CACP,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,8CAAqC,WAErD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,aAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CAAsC,EAAE,OAAO,GAC7D,EAAE,OAAO,CACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+CAAqC,SAC3C,IACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,KAAK,IAAI,UAAU,wCACtB,EAAE,OAAO,MAGZ,QAEL,AAAC,EAAE,MAAM,CAIN,KAHF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,YAAY,QAAS,IAAM,KAAK,EAAS,EAAE,EAAE,WAAG,gBAvB7D,EAAE,EAAE,OAiCvB"}